# Telegram-бот для генерации изображений с использованием Fusion Brain и Gemini

Этот проект представляет собой Telegram-бота, который позволяет пользователям генерировать изображения на основе текстовых запросов или анализировать и создавать похожие изображения из загруженных фотографий. Бот использует API нейросетей **Fusion Brain** для генерации изображений и **Google Gemini** для улучшения текстовых промптов и анализа изображений.

## Основные возможности

* **Генерация изображений по текстовому запросу:** Просто отправьте текстовое описание того, что вы хотите увидеть, и бот сгенерирует изображение.
* **Улучшение текстовых промптов:** Перед генерацией бот может использовать Google Gemini для улучшения вашего запроса, делая его более детальным и подходящим для нейросети.
* **Генерация изображений на основе фотографии:** Отправьте боту фотографию (как фото, а не как файл), чтобы он проанализировал ее с помощью Google Gemini Vision и сгенерировал похожее изображение.
* **Поддержка нескольких ключей Fusion Brain:** Бот может использовать несколько пар API-ключей Fusion Brain, что позволяет распределять нагрузку и повышать стабильность работы.
* **Асинхронная обработка:** Бот построен на асинхронной основе, что обеспечивает быструю и эффективную обработку запросов.

## Необходимые условия

Перед запуском бота убедитесь, что у вас есть:

* **Python 3.7 или выше:** Необходим для запуска скрипта.
* **Установленные зависимости:** Все необходимые библиотеки перечислены в разделе "Установка".
* **Токен Telegram-бота:** Вы можете получить его, создав нового бота через [BotFather](https://t.me/BotFather) в Telegram.
* **API-ключ Google Gemini:** Получите его на [сайте Google Cloud AI](https://ai.google.dev/).
* **API-ключи Fusion Brain:** Получите API-ключ и секретный ключ на [платформе Fusion Brain](https://fusionbrain.ai/). Вы можете настроить несколько пар ключей.

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone [https://github.com/ByteBudda/fusionBrainTGBot](https://github.com/ByteBudda/fusionBrainTGBot)
    cd fusionBrainTGBot
    ```

2.  **Создайте виртуальное окружение (рекомендуется):**
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    # venv\Scripts\activate  # Для Windows
    ```

3.  **Установите необходимые зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
    Файл `requirements.txt` должен содержать следующие строки:
    ```
    python-telegram-bot
    google-generativeai
    requests
    Pillow
    python-dotenv
    ```
    Вы можете создать его вручную или сгенерировать, запустив `pip freeze > requirements.txt` после установки зависимостей.

## Настройка

1.  **Создайте файл `.env`:**
    В корневой директории проекта создайте файл с именем `.env` и заполните его своими API-ключами и токеном Telegram-бота:

    ```dotenv
    TELEGRAM_BOT_TOKEN="YOUR_TELEGRAM_BOT_TOKEN"
    GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
    FUSION_BRAIN_API_KEY_1="YOUR_FUSION_BRAIN_API_KEY_1"
    FUSION_BRAIN_SECRET_KEY_1="YOUR_FUSION_BRAIN_SECRET_KEY_1"
    # Вы можете добавить дополнительные пары ключей Fusion Brain, например:
    # FUSION_BRAIN_API_KEY_2="YOUR_FUSION_BRAIN_API_KEY_2"
    # FUSION_BRAIN_SECRET_KEY_2="YOUR_FUSION_BRAIN_SECRET_KEY_2"
    # ...
    # Или использовать старый формат (если нумерованные ключи не найдены):
    # API_KEY="YOUR_FUSION_BRAIN_API_KEY"
    # SECRET_KEY="YOUR_FUSION_BRAIN_SECRET_KEY"
    # Или стандартные имена:
    # FUSION_BRAIN_API_KEY="YOUR_FUSION_BRAIN_API_KEY"
    # FUSION_BRAIN_SECRET_KEY="YOUR_FUSION_BRAIN_SECRET_KEY"
    # Опционально:
    # GEMINI_MODEL_NAME="gemini-1.5-flash-latest" # Или другая доступная модель Gemini
    ```
    Замените `YOUR_TELEGRAM_BOT_TOKEN`, `YOUR_GEMINI_API_KEY`, `YOUR_FUSION_BRAIN_API_KEY_1` и `YOUR_FUSION_BRAIN_SECRET_KEY_1` на свои фактические значения.

## Запуск бота

1.  **Перейдите в корневую директорию проекта.**
2.  **Запустите бота с помощью команды:**
    ```bash
    python main.py
    ```

3.  **Откройте Telegram и найдите своего бота.** Начните с ним диалог, отправив команду `/start` или текстовый запрос для генерации изображения.

## Использование

* Отправьте боту любое текстовое сообщение, чтобы сгенерировать изображение на основе этого текста.
* Отправьте боту фотографию (как фото, а не как файл), чтобы он проанализировал ее и сгенерировал похожее изображение.
* Используйте команду `/start`, чтобы получить приветственное сообщение и описание возможностей бота.
* Используйте команду `/help`, чтобы узнать подробнее о том, как пользоваться ботом.

## Конфигурация (дополнительно)

* **`GEMINI_MODEL_NAME`:** Вы можете изменить имя модели Gemini, используемой для улучшения промптов и анализа изображений, в файле `.env`. По умолчанию используется `gemini-1.5-flash-latest`, которая обычно быстрее и дешевле для задач Vision.

## Вклад в проект

Приветствуются любые вклады в развитие проекта. Вы можете сообщать об ошибках, предлагать новые функции или отправлять свои улучшения кода.

## Лицензия

[Укажите здесь лицензию, под которой распространяется ваш проект (например, MIT License)](LICENSE)

## Благодарности

* Библиотеке [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot) за удобное взаимодействие с Telegram Bot API.
* Команде [Google AI](https://ai.google.dev/) за предоставление мощного API Gemini.
* Команде [Fusion Brain](https://fusionbrain.ai/) за их API для генерации изображений.

---

**Примечание:** Убедитесь, что у вас установлены все необходимые зависимости и правильно настроен файл `.env` с вашими API-ключами. В случае возникновения проблем обратитесь к разделу "Необходимые условия" и "Установка".
